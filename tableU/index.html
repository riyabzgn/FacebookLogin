<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../tableU/style.css">
</head>

<body>
    <div class="content">
        <h2 class="head1">User Details</h2>
        <div>
            <input type="text" class="searchName" onkeyup="filterTable()" placeholder="Search users here"
                title="Type in a name">
        </div>
        <table id="table">
            <thead class="thead">
                <th>Name</th>
                <th>Address</th>
                <th>Phone No</th>
                <th>DoB</th>
                <th>Age</th>
                <th>Gender</th>
            </thead>
            <tbody id="tbody"></tbody>
        </table>
    </div>
    <script>
        const tbody = document.getElementById("tbody");

        //array values for the table
        const users = [
            { name: "Riya Bazgain", address: "Bhaktapur", phoneNo: 98233765784, dob: "27/03/2002", age: 21, gender: "Female" },
            { name: "Pritha Shrestha", address: "Baneshwor", phoneNo: 9803684576, dob: "01/01/2000", age: 22, gender: "Female" },
            { name: "Sanil Manandhar", address: "Kirtipur", phoneNo: 9808723444, dob: "04/07/2001", age: 21, gender: "Male" },
            { name: "Khushi Lamichanney ", address: "Gangtok", phoneNo: 980895678, dob: "02/07/2002", age: 21, gender: "Male"}
        ];

        //this functions adds data in the table through JS
        function addRow() {
            tbody.innerHTML = ""; // Clear the table body
            //optimized way of adding rows
            users.forEach((data) => {
                const row = document.createElement('tr');
                //it adds data to the specified columns
                row.innerHTML = `
                    <td>${data.name}</td>
                    <td>${data.address}</td>
                    <td>${data.phoneNo}</td>
                    <td>${data.dob}</td>
                    <td>${data.age}</td>
                    <td>${data.gender}</td>
                `;
                tbody.appendChild(row);
            });
        }
        
        //This table helps filter the name list and search for the specified name
        function filterTable() {
            const searchName = document.querySelector(".searchName");
            const keyword = searchName.value.toUpperCase();
            const rows = tbody.getElementsByTagName("tr");

            //iterates through the list of names
            for (const row of rows) {
                const nameCol = row.getElementsByTagName("td")[0];
                if (nameCol) {
                    // .textContent returns text content of an element
                    //innerText also represents textual content 
                    //BUTTT we use both using OR just in case the truth value isnt found using one.
                    const nameValue = nameCol.textContent || nameCol.innerText;
                    const nameMatch = nameValue.toUpperCase().includes(keyword);
                    //If shortcut used to check if the typed name matches with the existing list of names
                    row.style.display = nameMatch ? "" : "none";
                
                }
            }
        }

        addRow();
    </script>

</body>

</html>